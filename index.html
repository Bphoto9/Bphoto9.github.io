<!doctype html>
<html lang="th">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>‡∏ó‡∏≥‡πÉ‡∏ö‡πÄ‡∏™‡∏£‡πá‡∏à - B Photo ‡∏ï‡∏±‡∏î‡∏ï‡πà‡∏≠‡∏£‡∏µ‡∏ó‡∏±‡∏ä ‡∏£‡∏π‡∏õ‡∏ï‡∏¥‡∏î‡∏ö‡∏±‡∏ï‡∏£ ‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå</title><!-- Favicon -->
  <link rel="icon" type="image/jpeg" href="https://uppic.cloud/ib/8nXBcU5kYD7PO98_1761230726.jpg">
  <link rel="shortcut icon" type="image/jpeg" href="https://uppic.cloud/ib/8nXBcU5kYD7PO98_1761230726.jpg"><!-- Apple Touch Icons for iOS -->
  <link rel="apple-touch-icon" sizes="57x57" href="https://uppic.cloud/ib/8nXBcU5kYD7PO98_1761230726.jpg">
  <link rel="apple-touch-icon" sizes="60x60" href="https://uppic.cloud/ib/8nXBcU5kYD7PO98_1761230726.jpg">
  <link rel="apple-touch-icon" sizes="72x72" href="https://uppic.cloud/ib/8nXBcU5kYD7PO98_1761230726.jpg">
  <link rel="apple-touch-icon" sizes="76x76" href="https://uppic.cloud/ib/8nXBcU5kYD7PO98_1761230726.jpg">
  <link rel="apple-touch-icon" sizes="114x114" href="https://uppic.cloud/ib/8nXBcU5kYD7PO98_1761230726.jpg">
  <link rel="apple-touch-icon" sizes="120x120" href="https://uppic.cloud/ib/8nXBcU5kYD7PO98_1761230726.jpg">
  <link rel="apple-touch-icon" sizes="144x144" href="https://uppic.cloud/ib/8nXBcU5kYD7PO98_1761230726.jpg">
  <link rel="apple-touch-icon" sizes="152x152" href="https://uppic.cloud/ib/8nXBcU5kYD7PO98_1761230726.jpg">
  <link rel="apple-touch-icon" sizes="180x180" href="https://uppic.cloud/ib/8nXBcU5kYD7PO98_1761230726.jpg"><!-- Apple Mobile Web App -->
  <meta name="apple-mobile-web-app-title" content="‡∏ó‡∏≥‡πÉ‡∏ö‡πÄ‡∏™‡∏£‡πá‡∏à">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="default"><!-- Android/Chrome -->
  <meta name="application-name" content="‡∏ó‡∏≥‡πÉ‡∏ö‡πÄ‡∏™‡∏£‡πá‡∏à">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="theme-color" content="#1e40af">
  <meta name="msapplication-TileColor" content="#1e40af">
  <meta name="msapplication-TileImage" content="https://uppic.cloud/ib/8nXBcU5kYD7PO98_1761230726.jpg"><!-- Web App Manifest -->
  <link rel="manifest" href="data:application/json;base64,ewogICJuYW1lIjogIuC4l+C4s+C5g+C4muC5gOC4quC4o+C4seC4iCIsCiAgInNob3J0X25hbWUiOiAi4LiX4Liz4LmD4Lia4LmA4Liq4Lij4Lix4LiIIiwKICAiZGVzY3JpcHRpb24iOiAi4LmA4Lio4Lij4Liy4LiV4Liy4LiB4Lij4LmM4Liy4LiZ4LiB4Liy4Lij4LiX4Liz4LmD4Lia4LmA4Liq4Lij4Lix4LiIIEIgUGhvdG8iLAogICJzdGFydF91cmwiOiAiLyIsCiAgImRpc3BsYXkiOiAic3RhbmRhbG9uZSIsCiAgInRoZW1lX2NvbG9yIjogIiMxZTQwYWYiLAogICJiYWNrZ3JvdW5kX2NvbG9yIjogIiNmZmZmZmYiLAogICJvcmllbnRhdGlvbiI6ICJwb3J0cmFpdCIsCiAgImljb25zIjogWwogICAgewogICAgICAic3JjIjogImh0dHBzOi8vdXBwaWMuY2xvdWQvaWIvOG5YQmNVNWtZRDdQTzk4XzE3NjEyMzA3MjYuanBnIiwKICAgICAgInNpemVzIjogIjE5MngxOTIiLAogICAgICAidHlwZSI6ICJpbWFnZS9qcGVnIgogICAgfSwKICAgIHsKICAgICAgInNyYyI6ICJodHRwczovL3VwcGljLmNsb3VkL2liLzhuWEJjVTVrWUQ3UE85OF8xNzYxMjMwNzI2LmpwZyIsCiAgICAgICJzaXplcyI6ICI1MTJ4NTEyIiwKICAgICAgInR5cGUiOiAiaW1hZ2UvanBlZyIKICAgIH0KICBdCn0="><!-- PWA Meta Tags -->
  <meta name="format-detection" content="telephone=no">
  <meta name="msapplication-tap-highlight" content="no">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=cover">
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://html2canvas.herokuapp.com/dist/html2canvas.min.js"></script>
  <style>
        @import url('https://fonts.googleapis.com/css2?family=Sarabun:wght@300;400;500;600;700&display=swap');
        body { 
            font-family: 'Sarabun', sans-serif;
            box-sizing: border-box;
        }
        .receipt-container { background: white; }
        
        /* Mobile optimizations */
        @media (max-width: 768px) {
            .mobile-text-sm { font-size: 0.875rem; }
            .mobile-text-base { font-size: 1rem; }
            .mobile-text-lg { font-size: 1.125rem; }
            .mobile-text-xl { font-size: 1.25rem; }
            .mobile-text-2xl { font-size: 1.5rem; }
            .mobile-text-3xl { font-size: 1.875rem; }
            
            .mobile-p-2 { padding: 0.5rem; }
            .mobile-p-3 { padding: 0.75rem; }
            .mobile-p-4 { padding: 1rem; }
            .mobile-px-2 { padding-left: 0.5rem; padding-right: 0.5rem; }
            .mobile-px-3 { padding-left: 0.75rem; padding-right: 0.75rem; }
            .mobile-py-2 { padding-top: 0.5rem; padding-bottom: 0.5rem; }
            .mobile-py-3 { padding-top: 0.75rem; padding-bottom: 0.75rem; }
            
            .mobile-gap-2 { gap: 0.5rem; }
            .mobile-gap-3 { gap: 0.75rem; }
            .mobile-mb-3 { margin-bottom: 0.75rem; }
            .mobile-mb-4 { margin-bottom: 1rem; }
            
            .mobile-min-h-12 { min-height: 3rem; }
            .mobile-min-h-10 { min-height: 2.5rem; }
            
            /* Table responsive */
            .mobile-table-container {
                overflow-x: auto;
                -webkit-overflow-scrolling: touch;
            }
            
            .mobile-table th,
            .mobile-table td {
                min-width: 80px;
                white-space: nowrap;
            }
            
            .mobile-table .item-name {
                min-width: 120px;
                max-width: 150px;
                white-space: normal;
                word-wrap: break-word;
            }
            
            /* Button improvements */
            .mobile-btn {
                min-height: 44px;
                touch-action: manipulation;
                -webkit-tap-highlight-color: transparent;
            }
            
            /* Input improvements */
            .mobile-input {
                min-height: 44px;
                font-size: 16px; /* Prevents zoom on iOS */
            }
            
            /* Modal improvements */
            .mobile-modal {
                margin: 0.5rem;
                max-height: calc(100vh - 1rem);
            }
        }
        
        @media print {
            .no-print { display: none !important; }
        }
    </style>
  <style>@view-transition { navigation: auto; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
  <script src="/_sdk/element_sdk.js" type="text/javascript"></script>
 </head>
 <body class="bg-gradient-to-br from-blue-50 to-indigo-100 min-h-screen p-2 md:p-4">
  <div class="max-w-4xl mx-auto"><!-- Header -->
   <div class="bg-white rounded-lg shadow-lg p-3 md:p-6 mb-3 md:mb-6">
    <div class="text-center">
     <h1 class="text-2xl md:text-3xl font-bold text-blue-800 mb-2">B Photo</h1>
     <p class="text-base md:text-lg text-gray-600">‡∏ï‡∏±‡∏î‡∏ï‡πà‡∏≠‡∏£‡∏µ‡∏ó‡∏±‡∏ä ‡∏£‡∏π‡∏õ‡∏ï‡∏¥‡∏î‡∏ö‡∏±‡∏ï‡∏£ ‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå</p>
     <div class="w-16 md:w-24 h-1 bg-blue-500 mx-auto mt-2 md:mt-3 rounded"></div>
    </div>
   </div><!-- Receipt Container -->
   <div id="receiptContainer" class="receipt-container rounded-lg shadow-lg p-3 md:p-6 mb-3 md:mb-6">
    <div class="border-b-2 border-blue-200 pb-3 md:pb-4 mb-4 md:mb-6">
     <h2 class="text-xl md:text-2xl font-semibold text-center text-blue-800">‡πÉ‡∏ö‡πÄ‡∏™‡∏£‡πá‡∏à‡∏£‡∏±‡∏ö‡πÄ‡∏á‡∏¥‡∏ô</h2>
     <p class="text-center text-gray-600 mt-1 md:mt-2 text-sm md:text-base">Receipt</p>
    </div><!-- Receipt Table -->
    <div class="overflow-x-auto mobile-table-container">
     <table class="w-full border-collapse border border-gray-300 mobile-table text-sm md:text-base">
      <thead>
       <tr class="bg-blue-50">
        <th class="border border-gray-300 px-2 md:px-4 py-2 md:py-3 text-left font-semibold item-name">‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</th>
        <th class="border border-gray-300 px-2 md:px-4 py-2 md:py-3 text-center font-semibold w-20 md:w-24">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô</th>
        <th class="border border-gray-300 px-2 md:px-4 py-2 md:py-3 text-center font-semibold w-20 md:w-24">‡∏£‡∏≤‡∏Ñ‡∏≤/‡∏ö‡∏≤‡∏ó</th>
        <th class="border border-gray-300 px-2 md:px-4 py-2 md:py-3 text-center font-semibold w-20 md:w-24">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô</th>
        <th class="border border-gray-300 px-2 md:px-4 py-2 md:py-3 text-center font-semibold w-16 no-print">‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£</th>
       </tr>
      </thead>
      <tbody id="receiptTableBody"><!-- Rows will be added dynamically -->
      </tbody>
     </table>
    </div><!-- Shipping Row -->
    <div class="mt-2 md:mt-4">
     <table class="w-full border-collapse border border-gray-300 mobile-table text-sm md:text-base">
      <tbody>
       <tr id="shippingRow" class="bg-yellow-50 hidden">
        <td class="border border-gray-300 px-2 md:px-4 py-2 md:py-3 item-name">‡∏Ñ‡πà‡∏≤‡∏à‡∏±‡∏î‡∏™‡πà‡∏á‡∏û‡∏±‡∏™‡∏î‡∏∏ J&amp;T Express</td>
        <td class="border border-gray-300 px-2 md:px-4 py-2 md:py-3 text-center w-20 md:w-24">-</td>
        <td class="border border-gray-300 px-2 md:px-4 py-2 md:py-3 text-center w-20 md:w-24">50</td>
        <td class="border border-gray-300 px-2 md:px-4 py-2 md:py-3 text-center w-20 md:w-24">50</td>
        <td class="border border-gray-300 px-2 md:px-4 py-2 md:py-3 text-center w-16 no-print"></td>
       </tr>
      </tbody>
     </table>
    </div><!-- Total Section -->
    <div class="mt-4 md:mt-6 bg-blue-50 p-3 md:p-4 rounded-lg">
     <div class="flex justify-between items-center text-lg md:text-xl font-semibold"><span>‡∏£‡∏ß‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î:</span> <span id="totalAmount">0 ‡∏ö‡∏≤‡∏ó</span>
     </div>
     <div class="mt-2 text-center text-gray-700 text-sm md:text-base"><span id="totalInThai">‡∏®‡∏π‡∏ô‡∏¢‡πå‡∏ö‡∏≤‡∏ó‡∏ñ‡πâ‡∏ß‡∏ô</span>
     </div>
    </div><!-- Summary Section -->
    <div class="mt-4 md:mt-6 bg-gradient-to-r from-blue-50 to-indigo-50 p-3 md:p-6 rounded-lg border border-blue-200">
     <h3 class="text-lg md:text-xl font-semibold mb-3 md:mb-4 text-blue-800 flex items-center"><span class="bg-blue-100 p-1 md:p-2 rounded-full mr-2 md:mr-3 text-sm md:text-base">üìã</span> ‡∏™‡∏£‡∏∏‡∏õ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÉ‡∏ö‡πÄ‡∏™‡∏£‡πá‡∏à</h3>
     <div id="summaryList" class="text-gray-700">
      <div class="text-center py-6 md:py-8">
       <div class="text-4xl md:text-6xl mb-3 md:mb-4">
        üìù
       </div>
       <p class="text-gray-500 italic text-base md:text-lg">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å</p>
       <p class="text-gray-400 text-sm mt-2">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π‡∏™‡∏£‡∏∏‡∏õ‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà</p>
      </div>
     </div>
    </div>
   </div><!-- Control Panel -->
   <div class="bg-white rounded-lg shadow-lg p-3 md:p-6 no-print">
    <h3 class="text-lg md:text-xl font-semibold mb-3 md:mb-4 text-gray-800">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</h3>
    <div class="grid grid-cols-1 md:grid-cols-4 gap-3 md:gap-4 mb-3 md:mb-4">
     <div><label class="block text-sm font-medium text-gray-700 mb-2">‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</label> <select id="itemSelect" class="w-full px-3 py-3 md:py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 mobile-input text-sm md:text-base"> <option value="">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</option> <option value="‡∏ï‡∏±‡∏î‡∏ï‡πà‡∏≠‡∏£‡∏π‡∏õ ‡πÑ‡∏ü‡∏•‡πå Jpg.|125|‡πÑ‡∏ü‡∏•‡πå">‡∏ï‡∏±‡∏î‡∏ï‡πà‡∏≠‡∏£‡∏π‡∏õ ‡πÑ‡∏ü‡∏•‡πå Jpg.</option> <option value="‡∏ï‡∏±‡∏î‡∏ï‡πà‡∏≠‡∏£‡∏π‡∏õ ‡πÑ‡∏ü‡∏•‡πå Jpg. (‡∏Ñ‡∏¥‡∏ß‡∏î‡πà‡∏ß‡∏ô)|280|‡πÑ‡∏ü‡∏•‡πå">‡∏ï‡∏±‡∏î‡∏ï‡πà‡∏≠‡∏£‡∏π‡∏õ ‡πÑ‡∏ü‡∏•‡πå Jpg. (‡∏Ñ‡∏¥‡∏ß‡∏î‡πà‡∏ß‡∏ô)</option> <option value="‡∏≠‡∏±‡∏î‡∏£‡∏π‡∏õ 1 ‡∏ô‡∏¥‡πâ‡∏ß|20|‡πÇ‡∏´‡∏•">‡∏≠‡∏±‡∏î‡∏£‡∏π‡∏õ 1 ‡∏ô‡∏¥‡πâ‡∏ß</option> <option value="‡∏≠‡∏±‡∏î‡∏£‡∏π‡∏õ 1.5 ‡∏ô‡∏¥‡πâ‡∏ß|25|‡πÇ‡∏´‡∏•">‡∏≠‡∏±‡∏î‡∏£‡∏π‡∏õ 1.5 ‡∏ô‡∏¥‡πâ‡∏ß</option> <option value="‡∏≠‡∏±‡∏î‡∏£‡∏π‡∏õ 2 ‡∏ô‡∏¥‡πâ‡∏ß|30|‡πÇ‡∏´‡∏•">‡∏≠‡∏±‡∏î‡∏£‡∏π‡∏õ 2 ‡∏ô‡∏¥‡πâ‡∏ß</option> <option value="‡∏≠‡∏±‡∏î‡∏£‡∏π‡∏õ 1x1.5 ‡∏ô‡∏¥‡πâ‡∏ß|30|‡πÇ‡∏´‡∏•">‡∏≠‡∏±‡∏î‡∏£‡∏π‡∏õ 1x1.5 ‡∏ô‡∏¥‡πâ‡∏ß</option> <option value="‡∏≠‡∏±‡∏î‡∏£‡∏π‡∏õ 3.5 x 4.5 ‡πÄ‡∏ã‡∏ô‡∏ï‡∏¥‡πÄ‡∏°‡∏ï‡∏£ (‡∏ß‡∏µ‡∏ã‡πà‡∏≤‡πÄ‡∏Å‡∏≤‡∏´‡∏•‡∏µ)|30|‡πÇ‡∏´‡∏•">‡∏≠‡∏±‡∏î‡∏£‡∏π‡∏õ 3.5 x 4.5 ‡πÄ‡∏ã‡∏ô‡∏ï‡∏¥‡πÄ‡∏°‡∏ï‡∏£ (‡∏ß‡∏µ‡∏ã‡πà‡∏≤‡πÄ‡∏Å‡∏≤‡∏´‡∏•‡∏µ)</option> <option value="‡∏≠‡∏±‡∏î‡∏£‡∏π‡∏õ 8 x 13 ‡πÄ‡∏ã‡∏ô‡∏ï‡∏¥‡πÄ‡∏°‡∏ï‡∏£|5|‡∏£‡∏π‡∏õ">‡∏≠‡∏±‡∏î‡∏£‡∏π‡∏õ 8 x 13 ‡πÄ‡∏ã‡∏ô‡∏ï‡∏¥‡πÄ‡∏°‡∏ï‡∏£</option> <option value="‡∏≠‡∏±‡∏î‡∏£‡∏π‡∏õ 2x2 ‡∏ô‡∏¥‡πâ‡∏ß|30|‡πÇ‡∏´‡∏•">‡∏≠‡∏±‡∏î‡∏£‡∏π‡∏õ 2x2 ‡∏ô‡∏¥‡πâ‡∏ß</option> <option value="‡∏≠‡∏±‡∏î‡∏£‡∏π‡∏õ 4x6 ‡∏ô‡∏¥‡πâ‡∏ß|5|‡∏£‡∏π‡∏õ">‡∏≠‡∏±‡∏î‡∏£‡∏π‡∏õ 4x6 ‡∏ô‡∏¥‡πâ‡∏ß</option> </select>
     </div>
     <div><label class="block text-sm font-medium text-gray-700 mb-2">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô</label> <select id="quantitySelect" class="w-full px-3 py-3 md:py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 mobile-input text-sm md:text-base"> <option value="1">1</option> <option value="2">2</option> <option value="3">3</option> <option value="4">4</option> <option value="5">5</option> <option value="6">6</option> <option value="7">7</option> <option value="8">8</option> <option value="9">9</option> <option value="10">10</option> </select>
     </div>
     <div><label class="block text-sm font-medium text-gray-700 mb-2">‡∏£‡∏≤‡∏Ñ‡∏≤/‡∏ö‡∏≤‡∏ó</label> <input type="number" id="priceInput" class="w-full px-3 py-3 md:py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 mobile-input text-sm md:text-base" readonly>
     </div>
     <div class="flex items-end"><button id="addItemBtn" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-3 md:py-2 px-4 rounded-md transition duration-200 mobile-btn text-sm md:text-base"> ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ </button>
     </div>
    </div><!-- Custom Item Management -->
    <div class="mt-4 md:mt-6 p-3 md:p-4 bg-gray-50 rounded-lg">
     <h4 class="text-base md:text-lg font-semibold mb-3 text-gray-800">‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÅ‡∏•‡∏∞‡∏£‡∏≤‡∏Ñ‡∏≤</h4>
     <div class="grid grid-cols-1 md:grid-cols-3 gap-3 md:gap-4 mb-3 md:mb-4">
      <div><label class="block text-sm font-medium text-gray-700 mb-2">‡∏ä‡∏∑‡πà‡∏≠‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡∏°‡πà</label> <input type="text" id="customItemName" placeholder="‡πÄ‡∏ä‡πà‡∏ô ‡∏≠‡∏±‡∏î‡∏£‡∏π‡∏õ 5x7 ‡∏ô‡∏¥‡πâ‡∏ß" class="w-full px-3 py-3 md:py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 mobile-input text-sm md:text-base">
      </div>
      <div><label class="block text-sm font-medium text-gray-700 mb-2">‡∏£‡∏≤‡∏Ñ‡∏≤ (‡∏ö‡∏≤‡∏ó)</label> <input type="number" id="customItemPrice" placeholder="0" class="w-full px-3 py-3 md:py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 mobile-input text-sm md:text-base">
      </div>
      <div><label class="block text-sm font-medium text-gray-700 mb-2">‡∏´‡∏ô‡πà‡∏ß‡∏¢</label> <select id="customItemUnit" class="w-full px-3 py-3 md:py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 mobile-input text-sm md:text-base"> <option value="‡πÑ‡∏ü‡∏•‡πå">‡πÑ‡∏ü‡∏•‡πå</option> <option value="‡πÇ‡∏´‡∏•">‡πÇ‡∏´‡∏•</option> <option value="‡∏£‡∏π‡∏õ">‡∏£‡∏π‡∏õ</option> <option value="‡∏ä‡∏¥‡πâ‡∏ô">‡∏ä‡∏¥‡πâ‡∏ô</option> <option value="‡∏Ñ‡∏£‡∏±‡πâ‡∏á">‡∏Ñ‡∏£‡∏±‡πâ‡∏á</option> </select>
      </div>
     </div>
     <div class="flex flex-col sm:flex-row gap-2 mb-3 md:mb-4"><button id="addCustomItemBtn" class="bg-purple-600 hover:bg-purple-700 text-white font-medium py-3 md:py-2 px-4 rounded-md transition duration-200 mobile-btn text-sm md:text-base"> ‚ûï ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡∏°‡πà </button> <button id="showCustomItemsBtn" class="bg-indigo-600 hover:bg-indigo-700 text-white font-medium py-3 md:py-2 px-4 rounded-md transition duration-200 mobile-btn text-sm md:text-base"> üìã ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡∏°‡∏µ </button>
     </div>
    </div>
    <div class="flex flex-col sm:flex-row gap-3 md:gap-4"><button id="saveReceiptBtn" class="bg-green-600 hover:bg-green-700 text-white font-medium py-3 md:py-2 px-6 rounded-md transition duration-200 mobile-btn text-sm md:text-base"> üíæ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏†‡∏≤‡∏û </button> <button id="clearAllBtn" class="bg-red-600 hover:bg-red-700 text-white font-medium py-3 md:py-2 px-6 rounded-md transition duration-200 mobile-btn text-sm md:text-base"> üóëÔ∏è ‡∏•‡πâ‡∏≤‡∏á‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î </button>
    </div>
   </div><!-- Custom Items Management Modal -->
   <div id="customItemsModal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 no-print">
    <div class="flex items-center justify-center min-h-screen p-2 md:p-4">
     <div class="bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] md:max-h-96 overflow-y-auto mobile-modal">
      <div class="p-3 md:p-6">
       <div class="flex justify-between items-center mb-3 md:mb-4">
        <h3 class="text-lg md:text-xl font-semibold text-gray-800">‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÅ‡∏•‡∏∞‡∏£‡∏≤‡∏Ñ‡∏≤</h3><button id="closeModalBtn" class="text-gray-500 hover:text-gray-700 text-2xl mobile-btn">√ó</button>
       </div>
       <div id="customItemsList" class="space-y-2"><!-- Custom items will be listed here -->
       </div>
      </div>
     </div>
    </div>
   </div><!-- Receipt Summary Modal -->
   <div id="receiptSummaryModal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 no-print">
    <div class="flex items-center justify-center min-h-screen p-2 md:p-4">
     <div class="bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[95vh] overflow-y-auto mobile-modal">
      <div class="p-3 md:p-6">
       <div class="flex justify-between items-center mb-4 md:mb-6">
        <h3 class="text-lg md:text-2xl font-semibold text-blue-800">‡∏™‡∏£‡∏∏‡∏õ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÉ‡∏ö‡πÄ‡∏™‡∏£‡πá‡∏à</h3><button id="closeSummaryModalBtn" class="text-gray-500 hover:text-gray-700 text-2xl mobile-btn">√ó</button>
       </div><!-- Summary Content -->
       <div id="modalSummaryContent" class="bg-gradient-to-r from-blue-50 to-indigo-50 p-3 md:p-6 rounded-lg border border-blue-200"><!-- Summary will be copied here -->
       </div><!-- Modal Actions -->
       <div class="flex justify-center gap-3 md:gap-4 mt-4 md:mt-6"><button id="cancelSaveBtn" class="bg-gray-500 hover:bg-gray-600 text-white font-medium py-3 px-6 md:px-8 rounded-md transition duration-200 text-base md:text-lg mobile-btn"> ‚ùå ‡∏õ‡∏¥‡∏î </button>
       </div>
      </div>
     </div>
    </div>
   </div>
  </div>
  <script>
        let receiptItems = [];
        let itemCounter = 0;
        let customItems = JSON.parse(localStorage.getItem('bphoto_custom_items')) || [];
        let selectedReceiptData = JSON.parse(localStorage.getItem('bphoto_selected_receipt')) || [];

        // Thai number conversion
        const thaiNumbers = ['‡∏®‡∏π‡∏ô‡∏¢‡πå', '‡∏´‡∏ô‡∏∂‡πà‡∏á', '‡∏™‡∏≠‡∏á', '‡∏™‡∏≤‡∏°', '‡∏™‡∏µ‡πà', '‡∏´‡πâ‡∏≤', '‡∏´‡∏Å', '‡πÄ‡∏à‡πá‡∏î', '‡πÅ‡∏õ‡∏î', '‡πÄ‡∏Å‡πâ‡∏≤'];
        const thaiUnits = ['', '‡∏™‡∏¥‡∏ö', '‡∏£‡πâ‡∏≠‡∏¢', '‡∏û‡∏±‡∏ô', '‡∏´‡∏°‡∏∑‡πà‡∏ô', '‡πÅ‡∏™‡∏ô', '‡∏•‡πâ‡∏≤‡∏ô'];

        function numberToThai(num) {
            if (num === 0) return '‡∏®‡∏π‡∏ô‡∏¢‡πå‡∏ö‡∏≤‡∏ó‡∏ñ‡πâ‡∏ß‡∏ô';
            
            let result = '';
            let numStr = num.toString();
            let len = numStr.length;
            
            for (let i = 0; i < len; i++) {
                let digit = parseInt(numStr[i]);
                let position = len - i - 1;
                
                if (digit !== 0) {
                    if (position === 1 && digit === 1 && len > 1) {
                        result += '‡∏™‡∏¥‡∏ö';
                    } else if (position === 1 && digit === 2) {
                        result += '‡∏¢‡∏µ‡πà‡∏™‡∏¥‡∏ö';
                    } else if (digit === 1 && position === 0 && len > 1 && parseInt(numStr[i-1]) > 0) {
                        result += '‡πÄ‡∏≠‡πá‡∏î';
                    } else {
                        result += thaiNumbers[digit];
                        if (position > 0) {
                            result += thaiUnits[position];
                        }
                    }
                }
            }
            
            return result + '‡∏ö‡∏≤‡∏ó‡∏ñ‡πâ‡∏ß‡∏ô';
        }

        // Initialize custom items in dropdown
        function updateItemDropdown() {
            const itemSelect = document.getElementById('itemSelect');
            const defaultOptions = itemSelect.innerHTML;
            
            // Clear and rebuild
            itemSelect.innerHTML = '<option value="">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</option>';
            
            // Add default items
            const defaultItems = [
                '‡∏ï‡∏±‡∏î‡∏ï‡πà‡∏≠‡∏£‡∏π‡∏õ ‡πÑ‡∏ü‡∏•‡πå Jpg.|125|‡πÑ‡∏ü‡∏•‡πå',
                '‡∏ï‡∏±‡∏î‡∏ï‡πà‡∏≠‡∏£‡∏π‡∏õ ‡πÑ‡∏ü‡∏•‡πå Jpg. (‡∏Ñ‡∏¥‡∏ß‡∏î‡πà‡∏ß‡∏ô)|280|‡πÑ‡∏ü‡∏•‡πå',
                '‡∏≠‡∏±‡∏î‡∏£‡∏π‡∏õ 1 ‡∏ô‡∏¥‡πâ‡∏ß|20|‡πÇ‡∏´‡∏•',
                '‡∏≠‡∏±‡∏î‡∏£‡∏π‡∏õ 1.5 ‡∏ô‡∏¥‡πâ‡∏ß|25|‡πÇ‡∏´‡∏•',
                '‡∏≠‡∏±‡∏î‡∏£‡∏π‡∏õ 2 ‡∏ô‡∏¥‡πâ‡∏ß|30|‡πÇ‡∏´‡∏•',
                '‡∏≠‡∏±‡∏î‡∏£‡∏π‡∏õ 1x1.5 ‡∏ô‡∏¥‡πâ‡∏ß|30|‡πÇ‡∏´‡∏•',
                '‡∏≠‡∏±‡∏î‡∏£‡∏π‡∏õ 3.5 x 4.5 ‡πÄ‡∏ã‡∏ô‡∏ï‡∏¥‡πÄ‡∏°‡∏ï‡∏£ (‡∏ß‡∏µ‡∏ã‡πà‡∏≤‡πÄ‡∏Å‡∏≤‡∏´‡∏•‡∏µ)|30|‡πÇ‡∏´‡∏•',
                '‡∏≠‡∏±‡∏î‡∏£‡∏π‡∏õ 8 x 13 ‡πÄ‡∏ã‡∏ô‡∏ï‡∏¥‡πÄ‡∏°‡∏ï‡∏£|5|‡∏£‡∏π‡∏õ',
                '‡∏≠‡∏±‡∏î‡∏£‡∏π‡∏õ 2x2 ‡∏ô‡∏¥‡πâ‡∏ß|30|‡πÇ‡∏´‡∏•',
                '‡∏≠‡∏±‡∏î‡∏£‡∏π‡∏õ 4x6 ‡∏ô‡∏¥‡πâ‡∏ß|5|‡∏£‡∏π‡∏õ'
            ];
            
            defaultItems.forEach(item => {
                const [name, price, unit] = item.split('|');
                const option = document.createElement('option');
                option.value = item;
                option.textContent = name;
                itemSelect.appendChild(option);
            });
            
            // Add custom items
            customItems.forEach(item => {
                const option = document.createElement('option');
                option.value = `${item.name}|${item.price}|${item.unit}`;
                option.textContent = `${item.name} (‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡πÄ‡∏û‡∏¥‡πà‡∏°)`;
                option.style.color = '#7C3AED';
                itemSelect.appendChild(option);
            });
        }

        // Add custom item
        document.getElementById('addCustomItemBtn').addEventListener('click', function() {
            const name = document.getElementById('customItemName').value.trim();
            const price = parseInt(document.getElementById('customItemPrice').value);
            const unit = document.getElementById('customItemUnit').value;
            
            if (!name || !price || price <= 0) {
                alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÅ‡∏•‡∏∞‡∏£‡∏≤‡∏Ñ‡∏≤‡πÉ‡∏´‡πâ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á');
                return;
            }
            
            // Check if item already exists
            if (customItems.some(item => item.name === name)) {
                alert('‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ô‡∏µ‡πâ‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß');
                return;
            }
            
            const newItem = {
                id: Date.now(),
                name: name,
                price: price,
                unit: unit
            };
            
            customItems.push(newItem);
            localStorage.setItem('bphoto_custom_items', JSON.stringify(customItems));
            updateItemDropdown();
            
            // Clear form
            document.getElementById('customItemName').value = '';
            document.getElementById('customItemPrice').value = '';
            document.getElementById('customItemUnit').value = '‡πÑ‡∏ü‡∏•‡πå';
            
            alert('‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡∏°‡πà‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß');
        });

        // Show custom items modal
        document.getElementById('showCustomItemsBtn').addEventListener('click', function() {
            updateCustomItemsList();
            document.getElementById('customItemsModal').classList.remove('hidden');
        });

        // Close modal
        document.getElementById('closeModalBtn').addEventListener('click', function() {
            document.getElementById('customItemsModal').classList.add('hidden');
        });

        // Close summary modal
        document.getElementById('closeSummaryModalBtn').addEventListener('click', function() {
            document.getElementById('receiptSummaryModal').classList.add('hidden');
        });

        // Cancel save
        document.getElementById('cancelSaveBtn').addEventListener('click', function() {
            document.getElementById('receiptSummaryModal').classList.add('hidden');
        });

        // Update custom items list in modal
        function updateCustomItemsList() {
            const customItemsList = document.getElementById('customItemsList');
            
            if (customItems.length === 0) {
                customItemsList.innerHTML = '<p class="text-gray-500 italic text-center py-4 text-sm md:text-base">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏≠‡∏á</p>';
                return;
            }
            
            customItemsList.innerHTML = '';
            customItems.forEach(item => {
                const itemDiv = document.createElement('div');
                itemDiv.className = 'flex flex-col sm:flex-row items-start sm:items-center justify-between p-3 bg-purple-50 rounded-lg border gap-2';
                itemDiv.innerHTML = `
                    <div class="flex-1">
                        <span class="font-medium text-gray-800 text-sm md:text-base block">${item.name}</span>
                        <span class="text-gray-600 text-sm">${item.price} ‡∏ö‡∏≤‡∏ó/${item.unit}</span>
                    </div>
                    <div class="flex gap-2 w-full sm:w-auto">
                        <button onclick="editCustomItem(${item.id})" class="bg-yellow-500 hover:bg-yellow-600 text-white px-3 py-2 rounded text-sm mobile-btn flex-1 sm:flex-none">‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç</button>
                        <button onclick="deleteCustomItem(${item.id})" class="bg-red-500 hover:bg-red-600 text-white px-3 py-2 rounded text-sm mobile-btn flex-1 sm:flex-none">‡∏•‡∏ö</button>
                    </div>
                `;
                customItemsList.appendChild(itemDiv);
            });
        }

        // Edit custom item
        function editCustomItem(id) {
            const item = customItems.find(item => item.id === id);
            if (!item) return;
            
            const newName = prompt('‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ä‡∏∑‡πà‡∏≠‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£:', item.name);
            if (!newName || newName.trim() === '') return;
            
            const newPrice = prompt('‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏£‡∏≤‡∏Ñ‡∏≤ (‡∏ö‡∏≤‡∏ó):', item.price);
            if (!newPrice || parseInt(newPrice) <= 0) return;
            
            const newUnit = prompt('‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏´‡∏ô‡πà‡∏ß‡∏¢ (‡πÑ‡∏ü‡∏•‡πå/‡πÇ‡∏´‡∏•/‡∏£‡∏π‡∏õ/‡∏ä‡∏¥‡πâ‡∏ô/‡∏Ñ‡∏£‡∏±‡πâ‡∏á):', item.unit);
            if (!newUnit || newUnit.trim() === '') return;
            
            item.name = newName.trim();
            item.price = parseInt(newPrice);
            item.unit = newUnit.trim();
            
            localStorage.setItem('bphoto_custom_items', JSON.stringify(customItems));
            updateItemDropdown();
            updateCustomItemsList();
        }

        // Delete custom item
        function deleteCustomItem(id) {
            if (!confirm('‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ô‡∏µ‡πâ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?')) return;
            
            customItems = customItems.filter(item => item.id !== id);
            localStorage.setItem('bphoto_custom_items', JSON.stringify(customItems));
            updateItemDropdown();
            updateCustomItemsList();
        }

        // Update price when item is selected
        document.getElementById('itemSelect').addEventListener('change', function() {
            const selectedValue = this.value;
            if (selectedValue) {
                const [item, price, unit] = selectedValue.split('|');
                document.getElementById('priceInput').value = price;
            } else {
                document.getElementById('priceInput').value = '';
            }
        });

        // Add item to receipt
        document.getElementById('addItemBtn').addEventListener('click', function() {
            const itemSelect = document.getElementById('itemSelect');
            const quantitySelect = document.getElementById('quantitySelect');
            const priceInput = document.getElementById('priceInput');
            
            if (!itemSelect.value || !quantitySelect.value || !priceInput.value) {
                alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô');
                return;
            }
            
            const [itemName, price, unit] = itemSelect.value.split('|');
            const quantity = parseInt(quantitySelect.value);
            const unitPrice = parseInt(priceInput.value);
            const totalPrice = quantity * unitPrice;
            
            const newItem = {
                id: ++itemCounter,
                name: itemName,
                quantity: quantity,
                unit: unit,
                price: unitPrice,
                total: totalPrice
            };
            
            receiptItems.push(newItem);
            updateReceiptTable();
            updateShipping();
            updateTotal();
            updateSummary();
            
            // Reset form
            itemSelect.value = '';
            quantitySelect.value = '1';
            priceInput.value = '';
        });

        // Update receipt table
        function updateReceiptTable() {
            const tbody = document.getElementById('receiptTableBody');
            tbody.innerHTML = '';
            
            receiptItems.forEach(item => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td class="border border-gray-300 px-2 md:px-4 py-2 md:py-3 item-name text-sm md:text-base">${item.name}</td>
                    <td class="border border-gray-300 px-2 md:px-4 py-2 md:py-3 text-center text-sm md:text-base">${item.quantity}${item.unit === '‡πÑ‡∏ü‡∏•‡πå' ? ' ‡πÑ‡∏ü‡∏•‡πå' : ' ' + item.unit}</td>
                    <td class="border border-gray-300 px-2 md:px-4 py-2 md:py-3 text-center text-sm md:text-base">${item.price}</td>
                    <td class="border border-gray-300 px-2 md:px-4 py-2 md:py-3 text-center text-sm md:text-base">${item.total}</td>
                    <td class="border border-gray-300 px-2 md:px-4 py-2 md:py-3 text-center no-print">
                        <div class="flex flex-col sm:flex-row gap-1">
                            <button onclick="editItem(${item.id})" class="bg-yellow-500 hover:bg-yellow-600 text-white px-2 py-1 rounded text-xs mobile-btn">‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç</button>
                            <button onclick="deleteItem(${item.id})" class="bg-red-500 hover:bg-red-600 text-white px-2 py-1 rounded text-xs mobile-btn">‡∏•‡∏ö</button>
                        </div>
                    </td>
                `;
                tbody.appendChild(row);
            });
        }

        // Update shipping logic
        function updateShipping() {
            const shippingRow = document.getElementById('shippingRow');
            const hasEditingItems = receiptItems.some(item => item.name === '‡∏ï‡∏±‡∏î‡∏ï‡πà‡∏≠‡∏£‡∏π‡∏õ ‡πÑ‡∏ü‡∏•‡πå Jpg.');
            const hasPrintingItems = receiptItems.some(item => item.name.includes('‡∏≠‡∏±‡∏î‡∏£‡∏π‡∏õ'));
            
            // Show shipping if: only editing items OR (editing + printing) OR only printing
            if (receiptItems.length > 0 && (hasEditingItems || hasPrintingItems)) {
                // Hide shipping if ONLY editing items (no printing)
                if (hasEditingItems && !hasPrintingItems) {
                    shippingRow.classList.add('hidden');
                } else {
                    shippingRow.classList.remove('hidden');
                }
            } else {
                shippingRow.classList.add('hidden');
            }
        }

        // Update total
        function updateTotal() {
            let total = receiptItems.reduce((sum, item) => sum + item.total, 0);
            
            // Add shipping if visible
            const shippingRow = document.getElementById('shippingRow');
            if (!shippingRow.classList.contains('hidden')) {
                total += 50;
            }
            
            document.getElementById('totalAmount').textContent = total + ' ‡∏ö‡∏≤‡∏ó';
            document.getElementById('totalInThai').textContent = numberToThai(total);
        }

        // Update summary
        function updateSummary() {
            const summaryList = document.getElementById('summaryList');
            
            if (receiptItems.length === 0) {
                summaryList.innerHTML = `
                    <div class="text-center py-8">
                        <div class="text-6xl mb-4">üìù</div>
                        <p class="text-gray-500 italic text-lg">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å</p>
                        <p class="text-gray-400 text-sm mt-2">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π‡∏™‡∏£‡∏∏‡∏õ‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà</p>
                    </div>
                `;
                return;
            }
            
            let summaryHTML = `
                <div class="bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden">
                    <div class="bg-gradient-to-r from-blue-600 to-indigo-600 text-white px-4 py-3">
                        <div class="flex justify-between items-center">
                            <span class="font-semibold">‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</span>
                            <div class="flex space-x-8">
                                <span class="font-semibold">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô</span>
                                <span class="font-semibold">‡∏£‡∏≤‡∏Ñ‡∏≤</span>
                                <span class="font-semibold">‡∏£‡∏ß‡∏°</span>
                            </div>
                        </div>
                    </div>
                    <div class="divide-y divide-gray-200">
            `;
            
            receiptItems.forEach((item, index) => {
                const bgColor = index % 2 === 0 ? 'bg-white' : 'bg-gray-50';
                summaryHTML += `
                    <div class="${bgColor} px-4 py-3 hover:bg-blue-50 transition-colors duration-200">
                        <div class="flex justify-between items-center">
                            <div class="flex-1">
                                <span class="font-medium text-gray-800">${item.name}</span>
                            </div>
                            <div class="flex space-x-8 text-right">
                                <span class="w-16 text-gray-600">${item.quantity}${item.unit === '‡πÑ‡∏ü‡∏•‡πå' ? ' ‡πÑ‡∏ü‡∏•‡πå' : ' ' + item.unit}</span>
                                <span class="w-16 text-gray-600">${item.price}‡∏ø</span>
                                <span class="w-16 font-semibold text-blue-600">${item.total}‡∏ø</span>
                            </div>
                        </div>
                    </div>
                `;
            });
            
            // Add shipping if visible
            const shippingRow = document.getElementById('shippingRow');
            if (!shippingRow.classList.contains('hidden')) {
                const bgColor = receiptItems.length % 2 === 0 ? 'bg-white' : 'bg-gray-50';
                summaryHTML += `
                    <div class="${bgColor} px-4 py-3 hover:bg-yellow-50 transition-colors duration-200 border-t-2 border-yellow-200">
                        <div class="flex justify-between items-center">
                            <div class="flex-1">
                                <span class="font-medium text-gray-800 flex items-center">
                                    <span class="text-yellow-500 mr-2">üöö</span>
                                    ‡∏Ñ‡πà‡∏≤‡∏à‡∏±‡∏î‡∏™‡πà‡∏á‡∏û‡∏±‡∏™‡∏î‡∏∏ J&T Express
                                </span>
                            </div>
                            <div class="flex space-x-8 text-right">
                                <span class="w-16 text-gray-600">-</span>
                                <span class="w-16 text-gray-600">50‡∏ø</span>
                                <span class="w-16 font-semibold text-yellow-600">50‡∏ø</span>
                            </div>
                        </div>
                    </div>
                `;
            }
            
            // Calculate total
            let total = receiptItems.reduce((sum, item) => sum + item.total, 0);
            if (!shippingRow.classList.contains('hidden')) {
                total += 50;
            }
            
            summaryHTML += `
                    </div>
                    <div class="bg-gradient-to-r from-green-500 to-emerald-500 text-white px-4 py-4">
                        <div class="flex justify-between items-center">
                            <span class="text-lg font-bold flex items-center">
                                <span class="mr-2">üí∞</span>
                                ‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
                            </span>
                            <span class="text-2xl font-bold">${total}‡∏ø</span>
                        </div>
                        <div class="text-center mt-2 text-green-100">
                            <span class="text-sm">${numberToThai(total)}</span>
                        </div>
                    </div>
                </div>
            `;
            
            summaryList.innerHTML = summaryHTML;
        }

        // Delete item
        function deleteItem(id) {
            receiptItems = receiptItems.filter(item => item.id !== id);
            updateReceiptTable();
            updateShipping();
            updateTotal();
            updateSummary();
        }

        // Edit item
        function editItem(id) {
            const item = receiptItems.find(item => item.id === id);
            if (!item) return;
            
            const newQuantity = prompt('‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏à‡∏≥‡∏ô‡∏ß‡∏ô (1-10):', item.quantity);
            if (newQuantity && newQuantity >= 1 && newQuantity <= 10) {
                item.quantity = parseInt(newQuantity);
                item.total = item.quantity * item.price;
                updateReceiptTable();
                updateShipping();
                updateTotal();
                updateSummary();
            }
        }

        // Clear all
        document.getElementById('clearAllBtn').addEventListener('click', function() {
            if (confirm('‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡πâ‡∏≤‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?')) {
                receiptItems = [];
                updateReceiptTable();
                updateShipping();
                updateTotal();
                updateSummary();
            }
        });

        // Show summary modal when save button is clicked
        document.getElementById('saveReceiptBtn').addEventListener('click', function() {
            if (receiptItems.length === 0) {
                alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏Å‡πà‡∏≠‡∏ô‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å');
                return;
            }
            
            // Copy summary content to modal
            const originalSummary = document.getElementById('summaryList');
            const modalSummary = document.getElementById('modalSummaryContent');
            modalSummary.innerHTML = originalSummary.innerHTML;
            
            // Show modal
            document.getElementById('receiptSummaryModal').classList.remove('hidden');
        });



        // Initialize
        updateItemDropdown();
        updateTotal();
        updateSummary();
    </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'99707e095357eba0',t:'MTc2MTg4NTgxNS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
